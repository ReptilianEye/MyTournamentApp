{% extends "base.html" %} {% block title %}Your Tournaments{% endblock %} {% block content %}
<section class="tournaments_box_container container_tournaments">
    <br />
    <h3 align="center">Your Tournaments</h3>
    {% if user.tournaments|length > 0 %}
    <table style="margin: auto">
        <tbody style="display: flex; margin-top: 15px">
            <tr class="btn-danger_nav_list_group_tournaments">
                <div align="center ">
                    <td>Name</td>
                </div>
            </tr>
            <tr class="btn-danger_nav_list_group_tournaments">
                <div align="center ">
                    <td>Number Of Players</td>
                </div>
            </tr>
            <tr class="btn-danger_nav_list_group_tournaments">
                <div align="center ">
                    <td>Date</td>
                </div>
            </tr>
            <tr class="btn-danger_nav_list_group_tournaments">
                <div align="center ">
                    <td>Location</td>
                </div>
            </tr>
        </tbody>

        {% for tournament in user.tournaments %}
        <table style="margin: auto">
            <tbody class="btn_tournaments_list" onClick="showTournament({{tournament.id}}) " style="display: flex; margin-bottom: 15px">
                <button title="Tournament Settings" style="float: right; margin-top: 35px; margin-bottom: -55px;" id="myBtnSettings-{{loop.index}}" class="icon_settings">
          <img src="../static/pngegg.png" width="30" height="30" />


        </button> {% if tournament.status == "active" %}<button style="margin-left: 30px; margin-right: -70px;" class="btn_activity active">
            
          </button>{% endif %} {% if tournament.status == "notactive" %}<button style="margin-left: 30px; margin-right: -70px;" class="btn_activity not_active">
            
        </button>{% endif %} {% if tournament.status == "upcoming" %}<button style="margin-left: 30px; margin-right: -70px;" class="btn_activity up-comming">
            
        </button>{% endif %}

                <div style="float: right" id="settings_modal-{{loop.index}}" class="modal hidden">
                    <!-- Modal content -->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Settings
                                <h4 style="font-size: 13px; font-weight: 700; margin-top: 15px; color: #5aa0ba;">{{tournament.name}}</h4>
                            </h2>
                            <span class="close_settings">&times;</span>
                        </div>
                        <div class="modal-body">
                            <a href="#">
                                <button style="float: right; margin-right: 10px; margin: 15px" id="btn" class="btn-add-settings">
                  Edit
                </button>
                            </a>
                            <a href="#" onClick="deleteTournament({{tournament.id}})">
                                <button style="float: left; margin-left: 10px; margin: 15px" id="btn" class="btn-add-settings_delete">
                  Delete
                </button>
                            </a>
                        </div>
                    </div>
                </div>

                <tr class="btn-danger_nav_list_group_tournaments_name" align="center ">
                    <td>{{tournament.name}}</td>
                </tr>
                <tr class="btn-danger_nav_list_group_tournaments_name" align="center ">
                    <td>Players: {{tournament.opponents|length}}</td>
                </tr>
                <tr class="btn-danger_nav_list_group_tournaments_name" align="center ">
                    <td>{{tournament.date}}</td>
                </tr>
                <tr class="btn-danger_nav_list_group_tournaments_name" align="center ">
                    <td>{{tournament.location}}</td>
                </tr>
            </tbody>
        </table>
        <!-- <hr style="border: transparent; background-color: #20242a;">  -->
        {% endfor %}
        <br />
    </table>

    <script>
        // Get the modals
        const modalsSettings = document.querySelectorAll(".modal");

        // Get the buttons that opens the modal

        const iconSettingsButtons = document.querySelectorAll(".icon_settings");
        iconSettingsButtons.forEach((button) => {
            let buttonID = button.getAttribute("id").split("-")[1];
            modalsSettings.forEach((modal) => {
                let modalID = modal.getAttribute("id").split("-")[1];
                if (buttonID === modalID) {
                    button.addEventListener("click", () => {
                        modal.classList.remove("hidden");

                        // If modal should close also after click button, use this:
                        // modal.classList.toggle("hidden")
                    });
                    modal
                        .querySelector(".close_settings")
                        .addEventListener("click", () => {
                            modal.classList.add("hidden");

                            // If modal should close also after click button, use this:
                            // modal.classList.toggle("hidden")
                        });
                }
            });
        });
    </script>

    {% else %}
    <h5 style="color: white;" align="center">Eventually your have no active tournaments.</h5>
    {% endif %}

    <div align="center ">
        <a href="/new-tournament ">
            <button id="btn" type="button " class="btn-danger_nav_tournaments">
        Generate new schedule
      </button>
        </a>
    </div>
    <br />
</section>

{% endblock %}